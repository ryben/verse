(function(e){function t(t){for(var r,i,a=t[0],l=t[1],c=t[2],u=0,h=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],r=!0,a=1;a<s.length;a++){var l=s[a];0!==o[l]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=s[0]))}return e}var r={},o={app:0},n=[];function i(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=r,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/verse/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"18ae":function(e,t,s){},2663:function(e,t,s){"use strict";s("d833")},"3bdb":function(e,t,s){"use strict";s("bca2")},"4aa7":function(e,t,s){"use strict";s("5a81")},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("2b0e"),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"baseDiv"},on:{contextmenu:function(t){return e.rightClickHandler(t)}}},[t("CustomBackground"),t("VerseDisplay",{on:{"focus-controlbar-input":e.focusInput}}),t("ControlBar")],1)])},n=[],i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"textShade"}})},a=[],l=s("2f62");const c={isEmpty:function(e){return""==e||null==e||void 0==e||e=={}},isNotEmpty(e){return!this.isEmpty(e)},isEmptyObject:function(e){return null==e||0===Object.keys(e).length&&e.constructor===Object},isSubstringOfOther(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e.substring(0,t.length)==t||t.substring(0,e.length)==e},cloneObj(e){return{...e}},cloneObjArray(e){return e.map(e=>({...e}))},parseJson(e){try{return JSON.parse(e)}catch(t){return{}}}};var d=s("ade3");class u{constructor(){Object(d["a"])(this,"BG_CUSTOM_URL","BG_CUSTOM_URL"),Object(d["a"])(this,"getGdriveShareLinkRegex",".*drive\\.google\\.com\\/file\\/d\\/(.*)\\/.*")}async processUrl(e){let t=e;return e.match(this.getGdriveShareLinkRegex)&&(t=this.gdriveLinkToUrl(t)),await this.validateUrl(t),t}validateUrl(e){return new Promise((t,s)=>{const r=new Image;r.onload=()=>t(r),r.onerror=s,r.src=e})}gdriveLinkToUrl(e){let t=".*drive\\.google\\.com\\/file\\/d\\/(.*)\\/.*",s=e.match(t);return s?"https://drive.google.com/uc?id="+s[1]:""}}const h=new u;var p={data:function(){return{}},mounted:function(){},computed:{...Object(l["b"])(["isAddTextBg","selectedBg","bgImageCustomUrl"])},watch:{selectedBg:function(e){e==h.BG_CUSTOM_URL?this.applyCustomBg(this.bgImageCustomUrl):this.applyStaticBg(e)},isAddTextBg:function(){0==this.isAddTextBg?document.getElementById("textShade").style.background="":document.getElementById("textShade").style.background="#00000099"},bgImageCustomUrl:function(e){this.selectedBg==h.BG_CUSTOM_URL&&this.applyCustomBg(e)}},methods:{applyStaticBg(e){let t="/verse/backgrounds",s=t+"/"+e;this.applyBg(s)},applyBg(e){const t=document.querySelector("body");t.style.background="url('"+e+"')",t.style.backgroundSize="100% 100%",t.style.overflow="hidden",this.$store.dispatch("updateErrorDisplay",""),this.selectedBg==h.BG_CUSTOM_URL&&this.$store.dispatch("saveBgImageCustomUrl",e)},async applyCustomBg(e){if(c.isNotEmpty(e))try{let t=await h.processUrl(e);this.applyBg(t)}catch(t){this.$store.dispatch("updateErrorDisplay","Invalid Background URL")}}}},g=p,v=(s("e152"),s("2877")),m=Object(v["a"])(g,i,a,!1,null,null,null),f=m.exports,y=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"verseContainer",tabindex:"0"},on:{keydown:e.handleKeydown,copy:e.handleCopy}},[t("div",{attrs:{id:"verseTitleTranslationContainer"}},[t("VerseTitleAndVersion",{attrs:{"verse-details":e.verseDetails}})],1),t("div",{ref:"verseContent",attrs:{id:"verseContent"}},[e._v(" "+e._s(e.verseDetails.content)+" ")])])},b=[],V=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"verseTitleTranslationContainer"}},[t("span",{ref:"verseTitleContainer",staticClass:"verse-container"},[t("span",{staticClass:"arrow left unselectable",on:{click:function(t){return e.onClickLeft()}}},[e._v("◄")]),t("span",{staticClass:"arrow right unselectable",on:{click:function(t){return e.onClickRight()}}},[e._v("►")]),t("span",{ref:"verseTitle",attrs:{id:"verseTitle"},on:{click:e.onClickTitle,blur:e.onBlurTitle,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnterTitle.apply(null,arguments)},e.handleKeyDown]}},[e._v(" "+e._s(e.verseDetails.title)+" ")])]),t("div"),t("span",{ref:"verseVersion",attrs:{id:"verseVersion"},on:{click:e.onClickVersion,blur:e.onBlurVersion,keydown:e.handleKeyDown}},[e._v(" "+e._s(e.verseDetails.version)+" ")]),e.isDropdownVisible?t("div",{ref:"versionsDropdown",staticClass:"dropdown-menu",attrs:{id:"versionsDropdown"},on:{mouseenter:e.onHoverDropdown,mouseleave:e.onLeaveDropdown}},[t("ul",e._l(e.versions,(function(s){return t("li",{key:s.key,attrs:{value:s.key},on:{click:function(t){return e.onSelectVersion(s)}}},[e._v(" "+e._s(s.name)+" ")])})),0)]):e._e()])},k=[];const B={methods:{makeOtherRefEditable(e,t){this.frameText(t,!1),e.addEventListener("mouseover",()=>{this.frameText(t)}),e.addEventListener("mouseout",()=>{this.isTextEditable(t)||this.frameText(t,!1)})},makeEditable(e){this.frameText(e,!1),e.addEventListener("mouseover",()=>{this.frameText(e)}),e.addEventListener("mouseout",()=>{this.isTextEditable(e)||this.frameText(e,!1)})},setEditMode(e,t){t?(e.focus(),this.isTextEditable(e)||this.makeTextEditable(e)):(this.frameText(e,!1),this.makeTextEditable(e,!1))},isTextEditable(e){while(e){if("true"===e.contentEditable)return!0;if("false"===e.contentEditable)return!1;e=e.parentElement}return!1},makeTextEditable(e,t=!0){t?(e.setAttribute("contenteditable","true"),this.$nextTick(()=>{const t=document.createRange();t.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(t)}),this.frameText(e)):e.setAttribute("contenteditable","false")},frameText(e,t=!0){e.style.cssText=t?"\n                outline: 2px solid rgba(255, 255, 255, 0.7);\n                outline-offset: 3px 6px;\n                border-radius: 10px;\n                background-color: rgba(0, 0, 0, 0.3);\n                padding: 5px 10px;\n                margin: clamp(0.1rem, 0.3vw + 0.6vh, 0.4rem) -10px;\n              ":""}}},w=new r["a"];var S={name:"VerseTitleAndVersion",mixins:[B],props:["verseDetails"],data:function(){return{selectedVersion:"",isSelectingVersion:!1,isDropdownVisible:!1}},created(){w.$on("edit-verse-title",this.onClickTitle)},beforeDestroy(){w.$off("edit-verse-title",this.onClickTitle)},mounted(){this.makeOtherRefEditable(this.$refs.verseTitleContainer,this.$refs.verseTitle),this.makeEditable(this.$refs.verseVersion)},computed:{...Object(l["b"])(["versions"])},watch:{verseDetails(e){this.$refs.verseTitle.innerText=e.title,this.$refs.verseVersion.innerText=e.version}},methods:{onHoverDropdown(){this.isSelectingVersion=!0},onLeaveDropdown(){this.isSelectingVersion=!1},onSelectVersion(e){this.isDropdownVisible=!1,this.isSelectingVersion=!1,this.$store.dispatch("versionChanged",{version:e.key,isSync:!1})},onClickTitle(){this.setEditMode(this.$refs.verseTitle,!0)},onClickVersion(){let e=this.$refs.verseVersion;e.setAttribute("tabindex",0),e.focus(),this.isDropdownVisible=!0,this.$nextTick(()=>{const e=this.$refs.verseVersion,t=this.$refs.versionsDropdown;if(e&&t){const s=e.offsetWidth,r=window.getComputedStyle(e),o=r.marginLeft,n=r.fontFamily;let i=parseFloat(r.fontSize);i*=.85,t.style.width=s+"px",t.style.marginLeft=o,t.style.fontSize=i+"px",t.style.fontFamily=n,t.style.fontStyle="normal"}})},onBlurTitle(){this.setEditMode(this.$refs.verseTitle,!1),this.$refs.verseTitle.innerText=this.verseDetails.title},onBlurVersion(){this.setEditMode(this.$refs.verseVersion,!1),this.isSelectingVersion||(this.isDropdownVisible=!1),this.$refs.verseVersion.innerText=this.verseDetails.version},onEnterTitle(e){e.preventDefault(),this.$store.dispatch("verseEnteredNoVersion",e.target.innerText),this.setEditMode(this.$refs.verseTitle,!1)},onClickLeft(){this.$store.dispatch("showNextVerse",{isNextVerse:!1,isSync:!1})},onClickRight(){this.$store.dispatch("showNextVerse",{isNextVerse:!0,isSync:!1})},handleKeyDown(e){switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":e.stopPropagation();break}}}},x=S,C=(s("3bdb"),Object(v["a"])(x,V,k,!1,null,null,null)),T=C.exports,I={name:"VerseDisplay",props:[],components:{VerseTitleAndVersion:T},data:function(){return{}},mounted(){this.$nextTick(()=>{const e=document.getElementById("verseContainer");e.addEventListener("copy",this.handleCopy)})},computed:{...Object(l["b"])(["verseDetails","verseFontSize"])},watch:{verseFontSize(){this.adjustVerseFontSize()},verseDetails(){this.adjustVerseFontSize()}},methods:{adjustVerseFontSize(){let e=this.$refs.verseContent;const t=this.verseDetails.content.length,s=200,r=400,o=Math.min(Math.max(t,s),r);let n=(o-s)/(r-s);const i=2-.5*n+this.verseFontSize,a=4-1.5*n+this.verseFontSize,l=5+1*n+this.verseFontSize;e.style.cssText=`\n      font-size: clamp(0.1rem, ${i.toFixed(2)}vw + ${a.toFixed(2)}vh, ${l.toFixed(1)}rem);\n      `},showNextVerse:function(e){this.$store.dispatch("showNextVerse",{isNextVerse:e})},increaseFontSize(e){this.$store.dispatch("increaseFontSize",e)},focusInput(){this.$emit("focus-controlbar-input")},handleCopy(e){e.preventDefault();const t=document.getSelection();t&&e.clipboardData.setData("text/plain",t.toString())},handleKeydown(e){switch(e.key){case"ArrowLeft":case"PageUp":this.showNextVerse(!1);break;case"ArrowRight":case"PageDown":this.showNextVerse(!0);break;case"Escape":this.focusInput();break;case"ArrowDown":this.increaseFontSize(!1);break;case"ArrowUp":this.increaseFontSize(!0);break}},beforeDestroy(){const e=document.getElementById("verseContainer");e&&e.removeEventListener("copy",this.handleCopy)}}},A=I,E=(s("2663"),Object(v["a"])(A,y,b,!1,null,null,null)),D=E.exports,_=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex","align-items":"flex-end","justify-content":"flex-start"},attrs:{id:"controlBar"}},[t("button",{attrs:{id:"controlsToggle"},on:{click:function(t){e.isControlBarVisible=!e.isControlBarVisible}}},[e._v(" » ")]),t("div",{attrs:{id:"controls"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.verseAddressInput,expression:"verseAddressInput"}],ref:"verseInput",attrs:{id:"verseInput"},domProps:{value:e.verseAddressInput},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onClickGo.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.showNextVerse(!1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.showNextVerse(!0)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"page-up",void 0,t.key,void 0)?null:e.showNextVerse(!1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"page-down",void 0,t.key,void 0)?null:e.showNextVerse(!0)}],paste:e.onPasteVerseAddress,input:function(t){t.target.composing||(e.verseAddressInput=t.target.value)}}}),t("select",{directives:[{name:"model",rawName:"v-model",value:e.controlVersion,expression:"controlVersion"}],staticClass:"selector",attrs:{name:"translation",id:"translationInput"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.controlVersion=t.target.multiple?s:s[0]}}},e._l(e.versions,(function(s){return t("option",{key:s.key,domProps:{value:s.key}},[e._v(e._s(s.name))])})),0),t("a",{staticClass:"button",staticStyle:{"margin-right":"15px",width:"40px"},on:{click:e.onClickGo}},[e._v("Go")]),t("span",{staticStyle:{"margin-right":"15px"}},[t("a",{staticClass:"button",on:{click:function(t){return e.showNextVerse(!1)}}},[e._v("< Prev")]),t("a",{staticClass:"button",on:{click:function(t){return e.showNextVerse(!0)}}},[e._v("Next >")])]),t("span",{staticStyle:{"margin-right":"15px"}},[t("a",{staticClass:"button",on:{click:function(t){return e.increaseFontSize(!1)}}},[e._v("−")]),t("a",{staticClass:"button",on:{click:function(t){return e.increaseFontSize(!0)}}},[e._v("+")])]),t("label",{staticClass:"toggle"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.isAddTextBg,expression:"isAddTextBg"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isAddTextBg)?e._i(e.isAddTextBg,null)>-1:e.isAddTextBg},on:{change:function(t){var s=e.isAddTextBg,r=t.target,o=!!r.checked;if(Array.isArray(s)){var n=null,i=e._i(s,n);r.checked?i<0&&(e.isAddTextBg=s.concat([n])):i>-1&&(e.isAddTextBg=s.slice(0,i).concat(s.slice(i+1)))}else e.isAddTextBg=o}}}),t("span",{staticClass:"labels",attrs:{"data-on":"With Shade","data-off":"No Shade"}})]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedBg,expression:"selectedBg"}],staticClass:"selector",attrs:{id:"bgSelector"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedBg=t.target.multiple?s:s[0]}}},e._l(e.backgrounds,(function(s,r){return t("option",{key:r,domProps:{value:s}},[e._v(e._s(r))])})),0),t("input",{directives:[{name:"model",rawName:"v-model",value:e.bgImageCustomUrl,expression:"bgImageCustomUrl"}],attrs:{id:"bgImgCustomUrlInput"},domProps:{value:e.bgImageCustomUrl},on:{input:function(t){t.target.composing||(e.bgImageCustomUrl=t.target.value)}}}),t("span",{attrs:{id:"errorDisplay"}},[e._v(" "+e._s(e.errorDisplay)+" ")])])])},$=[],O=(s("d9e2"),s("14d9"),s("88a7"),s("271a"),s("5494"),s("bc3a")),U=s.n(O);const L="/verse/verses",N="versions.json",j=".json",F="books.json",z="versions",R="versionList",M=66,G=-1,P="(?:([iI]{1,3}|\\d+)\\s+)?([a-zA-Z]+(?: [a-zA-Z]+)*)\\s+(\\d+)(?:\\.|:|\\s+)(\\d+)";class K{constructor(){return Object(d["a"])(this,"currentVerseAddress",{}),Object(d["a"])(this,"defaultBibleVersionKey","adb"),Object(d["a"])(this,"bible",{versionList:[],versions:[{name:"Ang Dating Biblia",key:"adb",bookNames:["Genesis","Exodo"],content:{1:{1:{1:"Nang pasimula"}}}}]}),K.instance||(K.instance=this),this.bible={},K.instance}async init(){this.bible[R]=await this.loadBibleVersions()}async loadBibleVersions(){let e=`${L}/${N}`,t=await this.fetch(e);return c.isEmptyObject(this.bible)&&(this.bible[z]=c.cloneObjArray(t)),t}async parseVerseInput(e,t){let s=e.match(P);if(!s)throw"Invalid input";let r=s[2];"jn"==r.toLowerCase()&&(r="juan"),s[1]&&(r=s[1]+" "+r);let o=await this.findBookMatch(r,t);return this.createVerseAddress(t,o,s[3]+"",s[4]+"")}createVerseAddress(e,t,s,r){return{version:e,book:t,chapter:s,verse:r}}getBibleVersion(e){for(const t in this.bible.versions){let s=this.bible.versions[t];if(s.key==e)return s}return{}}async loadBookNames(e){if(c.isEmpty(e.bookNames)){let t=`${L}/${e.key}/${F}`;e.bookNames=await this.fetch(t)}}async findBookMatch(e,t){try{return await this.findBookMatchInVersion(e,t)}catch(s){for(let r in this.bible.versions)try{let s=this.bible.versions[r].key;if(t!=s)return await this.findBookMatchInVersion(e,s)}catch{}throw"Book not found: "+e}}async findBookMatchInVersion(e,t){let s=[],r=this.getBibleVersion(t);await this.loadBookNames(r);for(let o=0;o<r.bookNames.length;o++)r.bookNames[o].substring(0,e.length).toLowerCase()==e.toLowerCase()&&s.push(o);if(1==s.length)return s[0]+1;if(2==s.length){let e=r.bookNames[s[0]],t=r.bookNames[s[1]];return c.isSubstringOfOther(e,t)?1+(e.length<t.length?s[0]:s[1]):s[0]+1}if(s.length>2)return s[0]+1;throw"Book not found"}async isValidVerseAddress(e){if(c.isEmptyObject(e))return!1;try{return await this.fetchVerse(e),!0}catch(t){return!1}}async fetchVerse(e){let t=this.getBibleVersion(e.version);if(c.isEmpty(t.content)&&(t.content={}),await this.loadBookNames(t),c.isEmpty(t.content[e.book])){let s=`${L}/${t.key}/${e.book}${j}`;t.content[e.book]=await this.fetch(s)}let s=this.getVerseInfo(e);return this.currentVerseAddress=e,s}getDiffVersionVerseAddress(e){let t=this.currentVerseAddress;return t.version=e,t}getVerseInfo(e){let t=this.getBibleVersion(e.version),s=t.content[e.book];e.chapter==G&&(e.chapter=Object.keys(s).length);let r=s[e.chapter];if(c.isEmpty(r))throw new Error("Chapter not found: "+e.chapter);e.verse==G&&(e.verse=Object.keys(r).length);let o=r[e.verse];if(c.isEmpty(o))throw new Error("Verse not found: "+e.verse);let n={title:t.bookNames[e.book-1]+" "+e.chapter+":"+e.verse,content:o,version:t.name};return n}getNextVerseAddress(e){let t=this.currentVerseAddress.version,s=this.currentVerseAddress.book,r=this.currentVerseAddress.chapter,o=this.currentVerseAddress.verse;e?o++:o--;let n=this.getBibleVersion(t);return o>Object.keys(n.content[s][r]).length?(r++,o=1):o<1&&(r--,o=G),r>Object.keys(n.content[s]).length?(s++,r=1):r<1&&(s--,r=G),s>M?s=1:s<1&&(s=M),this.createVerseAddress(t,s,r,o)}loadVerseParamQuery(){var e=new URL(window.location.href);let t=e.searchParams.get("v");t&&(this.verseAddressInput=t),this.processVerseInput(this.verseAddressInput),this.focusInput()}async fetch(e){try{const t=await U.a.get(e);return t.data}catch(t){throw console.error("There was an error fetching a resource:",t),new Error("An error occurred")}}increaseFontSize(e){this.verseFontSize+=3*(e?1:-1)}}Object(d["a"])(K,"instance",null);var Y=new K;const J=h.BG_CUSTOM_URL,H="blue.jpg";var W={name:"ControlBar",props:[""],data:function(){return{verseAddressInput:"",backgrounds:{"Blue BG":H,"Brown BG":"brown.jpg",Orange:"orange.jpg",White:"white.jpg","Image URL":J}}},created(){w.$on("focus-controlbar-input",this.focusInput)},beforeDestroy(){w.$off("focus-controlbar-input",this.focusInput)},mounted:function(){this.showCustomUrlInput(this.selectedBg==J),this.selectedBg==J&&c.isEmpty(this.bgImageCustomUrl)&&(this.selectedBg=H)},computed:{...Object(l["b"])(["verseDetails","verseAddress","versions","errorDisplay","isControlBarVisible"]),selectedBg:{get(){return this.$store.state.selectedBg},set(e){this.$store.dispatch("setSelectedBg",e)}},bgImageCustomUrl:{get(){return this.$store.state.bgImageCustomUrl},set(e){this.$store.dispatch("setBgImageCustomUrl",e)}},isAddTextBg:{get(){return this.$store.state.isAddTextBg},set(e){this.$store.dispatch("setIsAddTextBg",e)}},controlVersion:{get(){return this.$store.state.controlVersion},set(e){this.$store.dispatch("controlVersionChanged",e)}},isControlBarVisible:{get(){return this.$store.state.isControlBarVisible},set(e){this.$store.dispatch("updateIsControlBarVisible",e)}}},watch:{controlVersion:function(e,t){c.isNotEmpty(t)&&this.$store.dispatch("versionChanged",{version:e})},selectedBg:function(e){this.showCustomUrlInput(e==J),c.isEmpty(e)&&(this.selectedBg=H)},errorDisplay:function(e){let t=document.getElementById("errorDisplay");c.isNotEmpty(e)?(t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.borderRadius="5px",t.style.padding="1px 8px"):t.style.backgroundColor=""},isControlBarVisible:function(e){var t=document.getElementById("controls"),s=document.getElementById("controlsToggle");s.style.transition="transform 0.3s ease",e?(t.classList.remove("controls-hidden"),s.style.transform="rotateY(0deg)",s.style.color="rgba(255, 255, 255, 0.8)"):(t.classList.add("controls-hidden"),s.style.transform="rotateY(180deg)",s.style.color="rgba(255, 255, 255, 0.5)")}},methods:{onClickGo(){this.$store.dispatch("verseEntered",{verseInput:this.verseAddressInput,version:this.controlVersion})},onPasteVerseAddress(e){let t=e.clipboardData.getData("text");t.match(Y.verseAddressRegex)&&this.$store.dispatch("verseEntered",{verseInput:t,version:this.controlVersion})},increaseFontSize(e){this.$store.dispatch("increaseFontSize",e)},focusInput(){let e=this.$refs.verseInput;e.focus(),e.select()},showNextVerse(e){this.$store.dispatch("showNextVerse",{isNextVerse:e})},showCustomUrlInput(e){const t=document.getElementById("bgImgCustomUrlInput");t.style.display=e?"inline":"none"}}},Z=W,q=(s("4aa7"),Object(v["a"])(Z,_,$,!1,null,null,null)),Q=q.exports,X={name:"App",components:{CustomBackground:f,VerseDisplay:D,ControlBar:Q},mounted:function(){const e=()=>{const{dispatch:e}=this.$store;e("loadStateFromStorage"),e("loadBgFromStorage")};this.$store.dispatch("loadBgFromStorage"),window.addEventListener("storage",e),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("storage",e)})},methods:{rightClickHandler:function(e){e.preventDefault(),this.focusInput()},focusInput(){this.$store.getters.isControlBarVisible?w.$emit("focus-controlbar-input"):w.$emit("edit-verse-title")}}},ee=X,te=(s("7a17"),Object(v["a"])(ee,o,n,!1,null,null,null)),se=te.exports;const re="KEY_VERSE_ADDRESS",oe="KEY_VERSE_FONT_SIZE",ne="KEY_IS_ADD_TEXT_BG",ie="KEY_BG_IMAGE",ae="KEY_BG_IMAGE_CUSTOM_URL",le={saveVerseToLocalStorage:function(e){localStorage.setItem(re,JSON.stringify(e))},saveFontSizeToLocalStorage:function(e){localStorage.setItem(oe,e)},saveTextBgToLocalStorage:function(e){localStorage.setItem(ne,e)},saveBgImageToLocalStorage:function(e){localStorage.setItem(ie,e)},saveBgImageCustomUrlToLocalStorage:function(e){localStorage.setItem(ae,e)},loadState:function(){return{verseAddress:c.parseJson(localStorage.getItem(re)),verseFontSize:parseFloat(localStorage.getItem(oe))||0,isAddTextBg:"true"==localStorage.getItem(ne),bgCustomImgUrl:localStorage.getItem(ae),selectedBg:localStorage.getItem(ie)}}};r["a"].use(l["a"]);var ce=new l["a"].Store({state:{verseDetails:{title:"",version:"",content:""},verseAddress:{},controlVersion:"",verseFontSize:0,versions:[],isAddTextBg:!1,selectedBg:"",bgImageCustomUrl:null,errorDisplay:"",isControlBarVisible:!0,syncVerse:!0,syncVersion:!0},mutations:{setVerseDetails(e,t){e.verseDetails=t},setVerseAddress(e,t){e.verseAddress=t},setVerseFontSize(e,t){e.verseFontSize=t},setVersions(e,t){e.versions=t},setControlVersion(e,t){e.controlVersion=t},setIsAddTextBg(e,t){e.isAddTextBg=t},setSelectedBg(e,t){e.selectedBg=t},setBgImageCustomUrl(e,t){e.bgImageCustomUrl=t},setErrorDisplay(e,t){e.errorDisplay=t},setSyncVerse(e,t){e.syncVerse=t},setSyncVersion(e,t){e.syncVersion=t},setIsControlBarVisible(e,t){e.isControlBarVisible=t}},actions:{initStore({commit:e,dispatch:t}){Y.init().then(()=>{let s=Y.bible.versionList;e("setVersions",s),t("loadStateFromStorage",!0)})},loadBibleVersions({commit:e}){Y.init().then(()=>{e("setVersions",Y.bible.versionList)})},async verseEntered({dispatch:e},{verseInput:t,version:s}){try{let r=await Y.parseVerseInput(t,s);e("fetchVerseDetails",r),e("updateErrorDisplay","")}catch(r){e("updateErrorDisplay",r)}},async verseEnteredNoVersion({commit:e,getters:t,dispatch:s},r){let o=t.verseAddress;e("setSyncVerse",!1),s("verseEntered",{verseInput:r,version:o.version})},async versionChanged({commit:e,dispatch:t},{version:s,isSync:r=!0}){e("setSyncVerse",r);let o=Y.getDiffVersionVerseAddress(s);t("fetchVerseDetails",o)},async controlVersionChanged({commit:e,dispatch:t},s){e("setControlVersion",s);let r=Y.getDiffVersionVerseAddress(s);t("fetchVerseDetails",r)},async showNextVerse({commit:e,dispatch:t},{isNextVerse:s,isSync:r=!0}){e("setSyncVerse",r);let o=await Y.getNextVerseAddress(s);t("fetchVerseDetails",o)},async fetchVerseDetails({commit:e,dispatch:t,getters:s},r){let o;try{o=await Y.fetchVerse(r),e("setVerseAddress",r),e("setVerseDetails",o),t("updateErrorDisplay","")}catch(n){t("updateErrorDisplay",n.message)}s.syncVerse&&le.saveVerseToLocalStorage(r),e("setSyncVerse",!0)},increaseFontSize({commit:e,getters:t},s){let r=t.verseFontSize+.2*(s?1:-1);e("setVerseFontSize",r),le.saveFontSizeToLocalStorage(r)},setIsAddTextBg({commit:e},t){le.saveTextBgToLocalStorage(t),e("setIsAddTextBg",t)},setSelectedBg({commit:e},t){le.saveBgImageToLocalStorage(t),e("setSelectedBg",t)},setBgImageCustomUrl({commit:e},t){e("setBgImageCustomUrl",t)},saveBgImageCustomUrl(e,t){le.saveBgImageCustomUrlToLocalStorage(t)},async loadStateFromStorage({commit:e,dispatch:t},s=!1){let r=le.loadState(),o=r.verseAddress,n=await Y.isValidVerseAddress(r.verseAddress);n?(t("fetchVerseDetails",o),e("setControlVersion",o.version)):(t("verseEntered",{verseInput:"Gen 1:1",version:this.getters.versions[0].key}),e("setControlVersion",this.getters.versions[0].key)),s?(e("setVerseFontSize",0),le.saveFontSizeToLocalStorage(0)):e("setVerseFontSize",parseFloat(r.verseFontSize))},loadBgFromStorage({commit:e}){let t=le.loadState();e("setIsAddTextBg",t.isAddTextBg),e("setSelectedBg",t.selectedBg),e("setBgImageCustomUrl",t.bgCustomImgUrl)},updateErrorDisplay({commit:e},t){e("setErrorDisplay",t)},updateIsControlBarVisible({commit:e},t){e("setIsControlBarVisible",t)}},getters:{verseDetails:e=>e.verseDetails,verseFontSize:e=>e.verseFontSize,versions:e=>e.versions,controlVersion:e=>e.controlVersion,verseAddress:e=>e.verseAddress,isAddTextBg:e=>e.isAddTextBg,selectedBg:e=>e.selectedBg,syncVerse:e=>e.syncVerse,syncVersion:e=>e.syncVersion,isControlBarVisible:e=>e.isControlBarVisible}});function de(){ce.dispatch("initStore")}r["a"].config.productionTip=!1,new r["a"]({store:ce,created(){de()},render:e=>e(se)}).$mount("#app")},"5a81":function(e,t,s){},"674b":function(e,t,s){},"7a17":function(e,t,s){"use strict";s("674b")},bca2:function(e,t,s){},d833:function(e,t,s){},e152:function(e,t,s){"use strict";s("18ae")}});
//# sourceMappingURL=app.705167a9.js.map